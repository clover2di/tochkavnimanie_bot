# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é –±–æ—Ç–∞ ¬´–¢–æ—á–∫–∞ –≤–Ω–∏–º–∞–Ω–∏—è¬ª

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É](#1-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è-–∫-—Å–µ—Ä–≤–µ—Ä—É)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (Ubuntu)](#2-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-—Å–µ—Ä–≤–µ—Ä–∞-ubuntu)
3. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python](#3-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-python)
4. [–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ Telegram –±–æ—Ç–∞](#4-–ø–æ–ª—É—á–µ–Ω–∏–µ-—Ç–æ–∫–µ–Ω–∞-telegram-–±–æ—Ç–∞)
5. [–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä](#5-–∑–∞–≥—Ä—É–∑–∫–∞-–ø—Ä–æ–µ–∫—Ç–∞-–Ω–∞-—Å–µ—Ä–≤–µ—Ä)
6. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#6-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
7. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#7-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
8. [–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞](#8-–ø–µ—Ä–≤—ã–π-–∑–∞–ø—É—Å–∫-–∏-–ø—Ä–æ–≤–µ—Ä–∫–∞)
9. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd —Å–µ—Ä–≤–∏—Å–∞](#9-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-systemd-—Å–µ—Ä–≤–∏—Å–∞)
10. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (–æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏)](#10-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-nginx-–æ–±—Ä–∞—Ç–Ω—ã–π-–ø—Ä–æ–∫—Å–∏)
11. [SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (HTTPS)](#11-ssl-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç-https)
12. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞](#12-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-—Ñ–∞–π—Ä–≤–æ–ª–∞)
13. [–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ](#13-—Ä–µ–∑–µ—Ä–≤–Ω–æ–µ-–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ)
14. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏](#14-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏-–ª–æ–≥–∏)
15. [–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#15-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
16. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#16-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)

---

## 1. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–° | Ubuntu 20.04+ / Debian 11+ / CentOS 8+ / Windows 10+ |
| CPU | 1 —è–¥—Ä–æ |
| RAM | 1 GB |
| –î–∏—Å–∫ | 10 GB SSD |
| –°–µ—Ç—å | –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π IP –∏–ª–∏ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è |

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –û–° | Ubuntu 22.04 LTS / Windows Server 2019+ |
| CPU | 2 —è–¥—Ä–∞ |
| RAM | 2 GB |
| –î–∏—Å–∫ | 20 GB SSD |

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã

| –ü–æ—Ä—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| 22 | SSH (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ) |
| 80 | HTTP (–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ HTTPS) |
| 443 | HTTPS (–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å) |

> üí° Telegram –±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ long polling –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤ –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

---

## 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (Ubuntu)

### 2.1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh root@–≤–∞—à_ip_–∞–¥—Ä–µ—Å
```

### 2.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤
apt update

# –û–±–Ω–æ–≤–ª—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
apt upgrade -y
```

### 2.3. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç root. –°–æ–∑–¥–∞–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```bash
# –°–æ–∑–¥–∞—ë–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
adduser botuser

# –î–æ–±–∞–≤–ª—è–µ–º –≤ –≥—Ä—É–ø–ø—É sudo (–¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∑–∞–¥–∞—á)
usermod -aG sudo botuser

# –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
su - botuser
```

### 2.4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∞–∑–æ–≤—ã—Ö —É—Ç–∏–ª–∏—Ç

```bash
sudo apt install -y git curl wget unzip htop nano
```

---

## 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python

### 3.1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏

```bash
python3 --version
```

–¢—Ä–µ–±—É–µ—Ç—Å—è Python 3.11 –∏–ª–∏ –≤—ã—à–µ.

### 3.2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python 3.11 (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```bash
# –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π deadsnakes
sudo apt install -y software-properties-common
sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt update

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Python 3.11
sudo apt install -y python3.11 python3.11-venv python3.11-dev

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É
python3.11 --version
```

### 3.3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pip

```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º pip –¥–ª—è Python 3.11
curl -sS https://bootstrap.pypa.io/get-pip.py | python3.11

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
python3.11 -m pip --version
```

---

## 4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ Telegram –±–æ—Ç–∞

### 4.1. –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ BotFather

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ **@BotFather**
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ **–∏–º—è –±–æ—Ç–∞** (–æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è): `–¢–æ—á–∫–∞ –≤–Ω–∏–º–∞–Ω–∏—è`
4. –í–≤–µ–¥–∏—Ç–µ **username –±–æ—Ç–∞** (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π): `tochka_vnimaniya_bot`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π **—Ç–æ–∫–µ–Ω** (—Ñ–æ—Ä–º–∞—Ç: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

### 4.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

–û—Ç–ø—Ä–∞–≤—å—Ç–µ BotFather —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

```
/setdescription
```
–í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ –∏ –≤–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ:
```
üé® –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –±–æ—Ç –¥–∏–∑–∞–π–Ω-—á–µ–ª–ª–µ–Ω–¥–∂–∞ ¬´–¢–æ—á–∫–∞ –≤–Ω–∏–º–∞–Ω–∏—è¬ª –¥–ª—è —à–∫–æ–ª—å–Ω–∏–∫–æ–≤ –†–æ—Å—Å–∏–∏.

–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ –∫–æ–Ω–∫—É—Ä—Å–µ.
```

```
/setabouttext
```
```
–í—Å–µ—Ä–æ—Å—Å–∏–π—Å–∫–∏–π –¥–∏–∑–∞–π–Ω-—á–µ–ª–ª–µ–Ω–¥–∂ —Å—Ä–µ–¥–∏ —à–∫–æ–ª—å–Ω–∏–∫–æ–≤.
–ü–æ–¥–∞–π –∑–∞—è–≤–∫—É –ø—Ä—è–º–æ –∑–¥–µ—Å—å!
```

```
/setcommands
```
```
start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
help - –ü–æ–º–æ—â—å –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```

### 4.3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤–∞—Ç–∞—Ä–∫–∏ –±–æ—Ç–∞

```
/setuserpic
```
–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (—Ñ–∞–π–ª `bot_icon.jpg` –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞).

---

## 5. –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ Git (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd ~

# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π/shkolatochka_bot.git

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd shkolatochka_bot
```

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ö–∏–≤–∞ —á–µ—Ä–µ–∑ SCP

–ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:
```bash
# –°–æ–∑–¥–∞—ë–º –∞—Ä—Ö–∏–≤ –ø—Ä–æ–µ–∫—Ç–∞
zip -r shkolatochka_bot.zip shkolatochka_bot/

# –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp shkolatochka_bot.zip botuser@–≤–∞—à_ip:/home/botuser/
```

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
cd ~
unzip shkolatochka_bot.zip
cd shkolatochka_bot
```

### –í–∞—Ä–∏–∞–Ω—Ç –í: –ß–µ—Ä–µ–∑ SFTP (FileZilla)

1. –°–∫–∞—á–∞–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [FileZilla](https://filezilla-project.org/)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É:
   - –•–æ—Å—Ç: `–≤–∞—à_ip`
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `botuser`
   - –ü–∞—Ä–æ–ª—å: –≤–∞—à –ø–∞—Ä–æ–ª—å
   - –ü–æ—Ä—Ç: `22`
3. –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –ø–∞–ø–∫—É `shkolatochka_bot` –≤ `/home/botuser/`

---

## 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 6.1. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Linux/macOS:

```bash
cd ~/shkolatochka_bot

# –°–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3.11 -m venv .venv

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ–≥–æ
source .venv/bin/activate

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Python
which python
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: /home/botuser/shkolatochka_bot/.venv/bin/python
```

#### Windows:

```powershell
cd C:\path\to\shkolatochka_bot

# –°–æ–∑–¥–∞—ë–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv .venv

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º–æ–π –ø—É—Ç—å –∫ python.exe –≤–º–µ—Å—Ç–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
# (PowerShell –±–ª–æ–∫–∏—Ä—É–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç—å
.venv\Scripts\python.exe --version
```

### 6.2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### Linux/macOS:

```bash
# –û–±–Ω–æ–≤–ª—è–µ–º pip
pip install --upgrade pip

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

#### Windows:

```powershell
# –û–±–Ω–æ–≤–ª—è–µ–º pip
.venv\Scripts\python.exe -m pip install --upgrade pip

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
.venv\Scripts\python.exe -m pip install -r requirements.txt
```

> üí° **–í–∞–∂–Ω–æ –¥–ª—è Windows:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º–æ–π –ø—É—Ç—å `.venv\Scripts\python.exe` –≤–º–µ—Å—Ç–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è PowerShell.

### 6.3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

#### Linux/macOS:
```bash
pip list
```

#### Windows:
```powershell
.venv\Scripts\python.exe -m pip list
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: `aiogram`, `fastapi`, `uvicorn`, `sqlalchemy`, `aiosqlite`, `jinja2`, `itsdangerous` –∏ –¥—Ä—É–≥–∏–µ.

---

## 7. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 7.1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
cd ~/shkolatochka_bot

# –ö–æ–ø–∏—Ä—É–µ–º –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp .env.example .env

# –û—Ç–∫—Ä—ã–≤–∞–µ–º –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
nano .env
```

### 7.2. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```env
# ========================================
# TELEGRAM BOT
# ========================================
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz

# ========================================
# ADMIN PANEL
# ========================================
# –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è —Å–µ—Å—Å–∏–π (—Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É)
ADMIN_SECRET_KEY=–≤–∞—à-–æ—á–µ–Ω—å-–¥–ª–∏–Ω–Ω—ã–π-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞

# –õ–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É
ADMIN_USERNAME=admin
ADMIN_PASSWORD=–≤–∞—à_–Ω–∞–¥—ë–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å

# ========================================
# DATABASE
# ========================================
# –ü—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö SQLite
DATABASE_URL=sqlite+aiosqlite:///./database/bot.db

# ========================================
# FILE STORAGE
# ========================================
# –ü–∞–ø–∫–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (—Ñ–æ—Ç–æ, –≥–æ–ª–æ—Å–æ–≤—ã–µ)
UPLOADS_DIR=uploads

# ========================================
# DEBUG
# ========================================
# –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π —Ä–µ–∂–∏–º (false –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞!)
DEBUG=false
```

### 7.3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –∫–ª—é—á
python3 -c "import secrets; print(secrets.token_hex(32))"
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `ADMIN_SECRET_KEY`.

### 7.6. –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏

- –§–∞–π–ª `.env` —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã (—Ç–æ–∫–µ–Ω –±–æ—Ç–∞, —Å–µ–∫—Ä–µ—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏, –ø–∞—Ä–æ–ª—å). –ü—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –Ω–æ–≤—É—é –º–∞—à–∏–Ω—É **—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–∞–∫–∂–µ —Ñ–∞–π–ª `.env`**, —Ç–æ–≥–¥–∞ –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–µ–º–∏ –∂–µ —Å–µ–∫—Ä–µ—Ç–∞–º–∏ –∏ —É—á—ë—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏.
- –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–º–µ–Ω–∏—Ç—å –∫–ª—é—á–∏ ‚Äî —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–∏—Ç–µ `.env` –Ω–∞ —Ü–µ–ª–µ–≤–æ–π –º–∞—à–∏–Ω–µ. –°–º–µ–Ω–∞ `ADMIN_SECRET_KEY` –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –∏–Ω–≤–∞–ª–∏–¥–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.
- –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–¥–∞–Ω –≤ –¥–≤—É—Ö –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö:
   - `ADMIN_PASSWORD` ‚Äî –ø—Ä–æ—Å—Ç–æ–π –ø–∞—Ä–æ–ª—å (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å, –º–µ–Ω–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ)
   - `ADMIN_PASSWORD_HASH` ‚Äî bcrypt-—Ö—ç—à (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞). –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω `ADMIN_PASSWORD_HASH`, —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å `ADMIN_PASSWORD`.
- –ù–∞ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `ADMIN_PASSWORD=admin` –∏–ª–∏ `ADMIN_SECRET_KEY=change-this-secret-key`). –≠—Ç–æ —Å–ª—É–∂–∏—Ç –ø–æ–¥—Å–∫–∞–∑–∫–æ–π ‚Äî –Ω–µ –æ—à–∏–±–∫–∞.

### 7.7. –õ–∏–º–∏—Ç—ã –∏ –∑–∞—â–∏—Ç–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–≥—Ä–∞–Ω–∏—á–µ–Ω (–ø—Ä–∏–º–µ—Ä 5 MB). –î–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –æ–±–Ω–æ–≤–∏—Ç–µ `MAX_FILE_SIZE_MB` –≤ `.env` –∏, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.
- –≠–∫—Å–ø–æ—Ä—Ç –∑–∞—è–≤–æ–∫ –≤ Excel –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –ø–æ –æ–±—ä—ë–º—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—ã–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–æ 10000 –∑–∞–ø–∏—Å–µ–π), –Ω–æ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –æ–±—ä—ë–º–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø –±–∞–∑—ã –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –≤–Ω–µ –ø–∏–∫–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏.


### 7.4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

–í nano: `Ctrl+O` ‚Üí Enter ‚Üí `Ctrl+X`

### 7.5. –ó–∞—â–∏—Ç–∞ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—É
chmod 600 .env
```

---

## 8. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞

### 8.1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```bash
cd ~/shkolatochka_bot

# –°–æ–∑–¥–∞—ë–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
mkdir -p logs
mkdir -p uploads/broadcasts
```

### 8.2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### Linux/macOS:
```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source .venv/bin/activate

# –ó–∞–ø—É—Å–∫–∞–µ–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ë–î
python run.py &

# –ñ–¥—ë–º 5 —Å–µ–∫—É–Ω–¥
sleep 5

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
pkill -f "python run.py"
```

#### Windows:
```powershell
# –ó–∞–ø—É—Å–∫–∞–µ–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ë–î (–Ω–∞–∂–º–∏—Ç–µ Ctrl+C —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥)
.venv\Scripts\python.exe run.py
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ë–î —Å–æ–∑–¥–∞–ª–∞—Å—å:
```bash
ls -la database/
# –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è —Ñ–∞–π–ª bot.db
```

### 8.3. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫

#### Linux/macOS:
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
python run.py
```

#### Windows:
```powershell
# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
.venv\Scripts\python.exe run.py
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
2026-01-29 12:00:00 - bot - INFO - ==================================================
2026-01-29 12:00:00 - bot - INFO - Starting Competition Bot
2026-01-29 12:00:00 - bot - INFO - ==================================================
2026-01-29 12:00:00 - bot - INFO - Initializing database...
2026-01-29 12:00:00 - bot - INFO - Database initialized.
2026-01-29 12:00:00 - bot - INFO - Starting services...
2026-01-29 12:00:00 - bot - INFO -   - Telegram Bot
2026-01-29 12:00:00 - bot - INFO -   - Admin Panel: http://localhost:8000
INFO:     Started server process [12345]
INFO:     Uvicorn running on http://0.0.0.0:8000
```

### 8.4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –ø–æ username
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
4. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º

### 8.5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

–í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
curl http://localhost:8000
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è HTML-–∫–æ–¥ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### 8.6. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

–í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å –±–æ—Ç–æ–º –Ω–∞–∂–º–∏—Ç–µ `Ctrl+C`.

---

## 9. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd —Å–µ—Ä–≤–∏—Å–∞

–°–æ–∑–¥–∞–¥–∏–º systemd —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### 9.1. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å–µ—Ä–≤–∏—Å–∞

```bash
sudo nano /etc/systemd/system/shkolatochka-bot.service
```

–í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```ini
[Unit]
Description=Shkolatochka Bot - Telegram Bot and Admin Panel
After=network.target

[Service]
Type=simple
User=botuser
Group=botuser
WorkingDirectory=/home/botuser/shkolatochka_bot
Environment="PATH=/home/botuser/shkolatochka_bot/.venv/bin"
ExecStart=/home/botuser/shkolatochka_bot/.venv/bin/python run.py
Restart=always
RestartSec=10

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
StandardOutput=journal
StandardError=journal

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
NoNewPrivileges=true
PrivateTmp=true

[Install]
WantedBy=multi-user.target
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ: `Ctrl+O` ‚Üí Enter ‚Üí `Ctrl+X`

### 9.2. –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞

```bash
# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é systemd
sudo systemctl daemon-reload

# –í–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable shkolatochka-bot

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å
sudo systemctl start shkolatochka-bot

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
sudo systemctl status shkolatochka-bot
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
‚óè shkolatochka-bot.service - Shkolatochka Bot - Telegram Bot and Admin Panel
     Loaded: loaded (/etc/systemd/system/shkolatochka-bot.service; enabled)
     Active: active (running) since ...
```

### 9.3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–º

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl start shkolatochka-bot

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
sudo systemctl stop shkolatochka-bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart shkolatochka-bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
sudo journalctl -u shkolatochka-bot -f
```

---

## 10. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx (–æ–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏)

Nginx –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å HTTPS-–∑–∞–ø—Ä–æ—Å—ã –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

### 10.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx

```bash
sudo apt install -y nginx
```

### 10.2. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
sudo nano /etc/nginx/sites-available/shkolatochka
```

–í—Å—Ç–∞–≤—å—Ç–µ (–∑–∞–º–µ–Ω–∏—Ç–µ `example.com` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω):

```nginx
server {
    listen 80;
    server_name example.com www.example.com;

    # –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ HTTPS (–ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL)
    # return 301 https://$server_name$request_uri;

    location / {
        proxy_pass http://127.0.0.1:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
        proxy_read_timeout 86400;
    }

    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è)
    location /static/ {
        alias /home/botuser/shkolatochka_bot/admin/static/;
        expires 30d;
        add_header Cache-Control "public, immutable";
    }
}
```

### 10.3. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞—ë–º —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É
sudo ln -s /etc/nginx/sites-available/shkolatochka /etc/nginx/sites-enabled/

# –£–¥–∞–ª—è–µ–º default –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
sudo rm /etc/nginx/sites-enabled/default

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Nginx
sudo systemctl restart nginx
```

### 10.4. –ü—Ä–æ–≤–µ—Ä–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://–≤–∞—à_ip` –∏–ª–∏ `http://–≤–∞—à_–¥–æ–º–µ–Ω`

---

## 11. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (HTTPS)

–ò—Å–ø–æ–ª—å–∑—É–µ–º –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt.

### 11.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot

```bash
sudo apt install -y certbot python3-certbot-nginx
```

### 11.2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```bash
sudo certbot --nginx -d example.com -d www.example.com
```

–°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
1. –í–≤–µ–¥–∏—Ç–µ email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
2. –°–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å —Å —É—Å–ª–æ–≤–∏—è–º–∏ (A)
3. –í—ã–±–µ—Ä–∏—Ç–µ, —Ö–æ—Ç–∏—Ç–µ –ª–∏ –ø–æ–ª—É—á–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É (N)
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ HTTP ‚Üí HTTPS (2)

### 11.3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç cron –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
sudo certbot renew --dry-run
```

### 11.4. –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

–ü–æ—Å–ª–µ Certbot —Ñ–∞–π–ª `/etc/nginx/sites-available/shkolatochka` –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ HTTPS.

---

## 12. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞

### 12.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ UFW

```bash
sudo apt install -y ufw
```

### 12.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª

```bash
# –†–∞–∑—Ä–µ—à–∞–µ–º SSH (–í–ê–ñ–ù–û! –ò–Ω–∞—á–µ –ø–æ—Ç–µ—Ä—è–µ—Ç–µ –¥–æ—Å—Ç—É–ø)
sudo ufw allow ssh

# –†–∞–∑—Ä–µ—à–∞–µ–º HTTP –∏ HTTPS
sudo ufw allow 'Nginx Full'

# –í–∫–ª—é—á–∞–µ–º —Ñ–∞–π—Ä–≤–æ–ª
sudo ufw enable

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
sudo ufw status
```

–†–µ–∑—É–ª—å—Ç–∞—Ç:
```
Status: active

To                         Action      From
--                         ------      ----
22/tcp                     ALLOW       Anywhere
Nginx Full                 ALLOW       Anywhere
```

---

## 13. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

### 13.1. –ß—Ç–æ –Ω—É–∂–Ω–æ –±—ç–∫–∞–ø–∏—Ç—å

- `/home/botuser/shkolatochka_bot/database/bot.db` ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `/home/botuser/shkolatochka_bot/.env` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- `/home/botuser/shkolatochka_bot/uploads/` ‚Äî –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 13.2. –°–∫—Ä–∏–ø—Ç —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
nano ~/backup.sh
```

```bash
#!/bin/bash

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏
BACKUP_DIR="/home/botuser/backups"
APP_DIR="/home/botuser/shkolatochka_bot"
DATE=$(date +%Y-%m-%d_%H-%M)

# –°–æ–∑–¥–∞—ë–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤
mkdir -p $BACKUP_DIR

# –°–æ–∑–¥–∞—ë–º –∞—Ä—Ö–∏–≤
tar -czf $BACKUP_DIR/backup_$DATE.tar.gz \
    $APP_DIR/database/bot.db \
    $APP_DIR/.env \
    $APP_DIR/uploads/

# –£–¥–∞–ª—è–µ–º –±—ç–∫–∞–ø—ã —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
find $BACKUP_DIR -name "backup_*.tar.gz" -mtime +7 -delete

echo "Backup completed: backup_$DATE.tar.gz"
```

```bash
# –î–µ–ª–∞–µ–º –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x ~/backup.sh

# –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Ä—É—á–Ω—É—é
~/backup.sh
```

### 13.3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø (cron)

```bash
crontab -e
```

–î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 3:00):
```
0 3 * * * /home/botuser/backup.sh >> /home/botuser/backups/backup.log 2>&1
```

### 13.4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ—Ä–≤–∏—Å
sudo systemctl stop shkolatochka-bot

# –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –±—ç–∫–∞–ø
tar -xzf /home/botuser/backups/backup_2026-01-29_03-00.tar.gz -C /

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å
sudo systemctl start shkolatochka-bot
```

---

## 14. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

### 14.1. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –õ–æ–≥–∏ –≤ —Ñ–∞–π–ª–µ
tail -f /home/botuser/shkolatochka_bot/logs/bot.log

# –õ–æ–≥–∏ —á–µ—Ä–µ–∑ journalctl
sudo journalctl -u shkolatochka-bot -f

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫
sudo journalctl -u shkolatochka-bot -n 100
```

### 14.2. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Nginx

```bash
# –õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞
sudo tail -f /var/log/nginx/access.log

# –õ–æ–≥–∏ –æ—à–∏–±–æ–∫
sudo tail -f /var/log/nginx/error.log
```

### 14.3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU –∏ –ø–∞–º—è—Ç–∏
htop

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
df -h

# –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–∞
ps aux | grep python
```

### 14.4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–∞
sudo systemctl status shkolatochka-bot

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞
curl -I http://localhost:8000

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–π IP
curl -I https://–≤–∞—à-–¥–æ–º–µ–Ω.com
```

---

## 15. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 15.1. –ß–µ—Ä–µ–∑ Git

```bash
cd ~/shkolatochka_bot

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ—Ä–≤–∏—Å
sudo systemctl stop shkolatochka-bot

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
git stash

# –ü–æ–ª—É—á–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
git pull origin main

# –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º .env (–µ—Å–ª–∏ –±—ã–ª –∏–∑–º–µ–Ω—ë–Ω)
git stash pop

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source .venv/bin/activate

# –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å
sudo systemctl start shkolatochka-bot
```

### 15.2. –ß–µ—Ä–µ–∑ –∞—Ä—Ö–∏–≤

```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ—Ä–≤–∏—Å
sudo systemctl stop shkolatochka-bot

# –ë—ç–∫–∞–ø —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
cp -r ~/shkolatochka_bot ~/shkolatochka_bot_backup

# –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
# (—á–µ—Ä–µ–∑ scp –∏–ª–∏ sftp)

# –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º, —Å–æ—Ö—Ä–∞–Ω—è—è .env –∏ –±–∞–∑—É
# ...

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å
sudo systemctl start shkolatochka-bot
```

### 15.3. –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –º–æ–¥–µ–ª–∏:

```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ—Ä–≤–∏—Å
sudo systemctl stop shkolatochka-bot

# –î–µ–ª–∞–µ–º –±—ç–∫–∞–ø –ë–î
cp ~/shkolatochka_bot/database/bot.db ~/shkolatochka_bot/database/bot.db.backup

# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—É—é –ë–î (–í–ù–ò–ú–ê–ù–ò–ï: –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã!)
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic –µ—Å–ª–∏ –æ–Ω–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
rm ~/shkolatochka_bot/database/bot.db

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å (–ë–î —Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
sudo systemctl start shkolatochka-bot
```

---

## 16. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. –°–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω?
   ```bash
   sudo systemctl status shkolatochka-bot
   ```
2. –ù–µ—Ç –ª–∏ –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö?
   ```bash
   sudo journalctl -u shkolatochka-bot -n 50
   ```
3. –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π?
   ```bash
   grep BOT_TOKEN ~/shkolatochka_bot/.env
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
1. Nginx —Ä–∞–±–æ—Ç–∞–µ—Ç?
   ```bash
   sudo systemctl status nginx
   ```
2. –ü–æ—Ä—Ç 8000 —Å–ª—É—à–∞–µ—Ç—Å—è?
   ```bash
   ss -tlnp | grep 8000
   ```
3. –§–∞–π—Ä–≤–æ–ª –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç?
   ```bash
   sudo ufw status
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ "Permission denied"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ñ–∞–π–ª–æ–≤
ls -la ~/shkolatochka_bot/

# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
sudo chown -R botuser:botuser ~/shkolatochka_bot/
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Address already in use"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ù–∞—Ö–æ–¥–∏–º –ø—Ä–æ—Ü–µ—Å—Å, –∑–∞–Ω–∏–º–∞—é—â–∏–π –ø–æ—Ä—Ç
sudo lsof -i :8000

# –£–±–∏–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å
sudo kill -9 <PID>

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å
sudo systemctl restart shkolatochka-bot
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏—Å—Ç—ë–∫

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û–±–Ω–æ–≤–ª—è–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤—Ä—É—á–Ω—É—é
sudo certbot renew

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Nginx
sudo systemctl restart nginx
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–µ—Ä–≤–∏—Å
sudo systemctl stop shkolatochka-bot

# –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑ –±—ç–∫–∞–ø–∞
cp ~/backups/bot.db.backup ~/shkolatochka_bot/database/bot.db

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å
sudo systemctl start shkolatochka-bot
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
df -h

# –û—á–∏—â–∞–µ–º –ª–æ–≥–∏
sudo journalctl --vacuum-time=7d

# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã
find ~/backups -name "*.tar.gz" -mtime +30 -delete

# –û—á–∏—â–∞–µ–º pip –∫—ç—à
pip cache purge
```

---

## –ß–µ–∫-–ª–∏—Å—Ç —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è

- [ ] –°–µ—Ä–≤–µ—Ä –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω (–æ–±–Ω–æ–≤–ª—ë–Ω, —Å–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
- [ ] Python 3.11+ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ü—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- [ ] –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ
- [ ] –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –ø–æ–ª—É—á–µ–Ω
- [ ] –§–∞–π–ª .env –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ —É—Å–ø–µ—à–µ–Ω
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram
- [ ] Systemd —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –§–∞–π—Ä–≤–æ–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ HTTPS

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –ø—Ä–æ–µ–∫—Ç–∞.
