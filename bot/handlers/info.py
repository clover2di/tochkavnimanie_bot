from aiogram import Router, F
from aiogram.types import Message
from aiogram.filters import Command

from database.database import async_session
from database import crud
from bot.keyboards.menus import get_main_menu

router = Router()


@router.message(F.text == "‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")
@router.message(Command("info"))
async def show_info(message: Message):
    """Show competition information."""
    async with async_session() as db:
        info_text = await crud.get_bot_content(db, "info_message")
        if not info_text:
            info_text = (
                "<b>ll –í—Å–µ—Ä–æ—Å—Å–∏–π—Å–∫–∏–π –¥–∏–∑–∞–π–Ω-—á–µ–ª–ª–µ–Ω–¥–∂ ¬´–¢–æ—á–∫–∞ –≤–Ω–∏–º–∞–Ω–∏—è¬ª –¥–ª—è —É—á–µ–Ω–∏–∫–æ–≤ 6-11 –∫–ª–∞—Å—Å–æ–≤</b>\n\n"
                "<b>–ò–≥—Ä–∞ –≤ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫</b>\n\n"
                "–≠—Ç–æ –≤—Ç–æ—Ä–∞—è —Å–µ—Ä–∏—è –∏–≥—Ä—ã, —Å–æ—Å—Ç–æ—è—â–∞—è –∏–∑ —Ç—Ä–µ—Ö —ç—Ç–∞–ø–æ–≤, –≥–¥–µ —Ç–µ–±—è –∂–¥—É—Ç –∑–∞–¥–∞—á–∏, –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–º –ë–∞—É—Ö–∞—É—Å–æ–º ‚Äî —à–∫–æ–ª–æ–π, –∫–æ—Ç–æ—Ä–∞—è –∏–∑–º–µ–Ω–∏–ª–∞ –º–∏—Ä –¥–∏–∑–∞–π–Ω–∞.\n\n"
                "<b>–¢—Ä–∏ —ç—Ç–∞–ø–∞, —Ç—Ä–∏ –≤—ã–∑–æ–≤–∞:</b>\n\n"
                "üìê <b>–û–±—ä–µ–º –∏ —Ñ–æ—Ä–º–∞</b> (2‚Äì10 —Ñ–µ–≤—Ä–∞–ª—è)\n"
                "–ü–æ–∫–∞–∂–∏, –∫–∞–∫ —Ç—ã —É–º–µ–µ—à—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–æ—Ä–º–∞–º–∏, –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–¥—Ä—É—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.\n\n"
                "üí° <b>–ò–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ</b> (16‚Äì21 —Ñ–µ–≤—Ä–∞–ª—è)\n"
                "–ü—Ä–æ—è–≤–∏ —Å–º–µ–∫–∞–ª–∫—É –∏ —Å–æ–∑–¥–∞–π —á—Ç–æ-—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–æ–≤–æ–µ ‚Äî —Ç–æ, —á—Ç–æ —É–¥–∏–≤–∏—Ç –≤—Å–µ—Ö!\n\n"
                "üé® <b>–ö–æ–º–ø–æ–∑–∏—Ü–∏—è</b> (2‚Äì7 –º–∞—Ä—Ç–∞)\n"
                "–°–æ–∑–¥–∞–π –≥–∞—Ä–º–æ–Ω–∏—á–Ω—É—é –∏ –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω—É—é –∫–æ–º–ø–æ–∑–∏—Ü–∏—é, –∏–≥—Ä–∞—è —Å —Ñ–æ—Ä–º–∞–º–∏, –ª–∏–Ω–∏—è–º–∏ –∏ —Ü–≤–µ—Ç–∞–º–∏.\n\n"
                "üéÅ –ê–≤—Ç–æ—Ä—ã –ª—É—á—à–∏—Ö —Ä–∞–±–æ—Ç –ø–æ–ª—É—á–∞—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑—ã, –∞ –≥–ª–∞–≤–Ω—ã–π —á–µ–ª–ª–µ–Ω–¥–∂–µ—Ä ‚Äì –∫–æ–ª–æ–Ω–∫—É –ê–ª–∏—Å–∞!\n\n"
                "üì¢ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫–∞–Ω–∞–ª: @tochkavnimaniya"
            )
    
    await message.answer(info_text, reply_markup=get_main_menu())


@router.message(F.text == "‚ùì –ü–æ–º–æ—â—å")
@router.message(Command("help"))
async def show_help(message: Message):
    """Show help message."""
    async with async_session() as db:
        help_text = await crud.get_bot_content(db, "help_message")
        if not help_text:
            help_text = (
                "<b>–°–ø—Ä–∞–≤–∫–∞ –ø–æ –±–æ—Ç—É:</b>\n\n"
                "üìù <b>–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É</b> - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ –∫–æ–Ω–∫—É—Ä—Å\n"
                "üìã <b>–ú–æ–∏ —Ä–∞–±–æ—Ç—ã</b> - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–¥–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏\n"
                "‚ÑπÔ∏è <b>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</b> - —É–∑–Ω–∞—Ç—å –æ –∫–æ–Ω–∫—É—Ä—Å–µ –∏ —ç—Ç–∞–ø–∞—Ö\n\n"
                "–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º: @tochkavnimaniya"
            )
    
    await message.answer(help_text, reply_markup=get_main_menu())
